# Поиск вакансий с подключением БД

Программа для получения данных о компаниях и вакансиях с сайта hh.ru с созданием, записью и чтением таблицы БД PostgreSQL

## Структура проекта

- **src**: содержит все исходные файлы проекта
  - **config.py**: настройка конфигурации для подключения к базе данных и ее создания
  - **db_create.py**: класс для создания БД, подключение к ней, и таблицы
  - **db_manager.py**: класс для работы с базой данных для извлечения информации (город, вакансия, ЗП, компания, ссылка) о вакансиях и компаниях
  - **hh_api.py**: класс для работы с API HeadHunter
 

## Описание классов

### DBCreate
Создает базу данных, подключение к ней, и таблицы

#### Методы:
- `def __init__(self, **params: dict[str, Any]) -> None`: Инициализирует подключение к базе данных
- `create_database(self) -> None`: Создаёт базу данных
- `create_tables(self) -> None`: Создаёт таблицы в базе данных
- `insert_data_to_db(self, vacancies: list[dict]) -> None`: Заполняет данные в таблицы базы данных


### DBManager
Класс для работы с базой данных для извлечения информации (город, вакансия, ЗП, компания, ссылка) о вакансиях и компаниях

#### Методы:
- `__init__(self, **params: dict[str, Any]) -> None`: Инициализирует объект DBManager с параметрами для подключения к базе данных
- `connect(self) -> Any:`: Устанавливает соединение с базой данных
- `get_companies_and_vacancies_count(self) -> Any`: Получает список всех компаний и количества вакансий у каждой компании
- `get_all_vacancies(self) -> Any`: Получает список всех вакансий
- `get_avg_salary(self) -> Any`: Получает среднюю ЗП по вакансиям
- `get_vacancies_with_higher_salary(self) -> Any`: Получает вакансии с ЗП выше средней
- `get_vacancies_with_keyword(self, keyword: str) -> Any`: Получает вакансии, содержащие ключевое слово


### HeadHunterAPI
Выполняет загрузку вакансий с API HeadHunter, проверку последних на наличие обязательных полей (ЗП и адреса) и их валидацию

#### Методы:
- `__init__(self) -> None`: Инициализирует объект для работы с API HeadHunter. Устанавливает базовый URL для запросов, заголовки, параметры поиска вакансий и выполняет загрузку вакансий и их валидацию
- `vacancies(self) -> list`: Возвращает список вакансий
- `_load_vacancies(self) -> None`: Загружает вакансии с API HeadHunter в количестве указанных страниц (2000 вакансий (20 страниц))
- `_validate_vacancy(self) -> None`: Удаляет вакансии, если ЗП или адрес не указаны


### config
Функция для настройки конфигурации для подключения к базе данных и ее создания


## Настройка
1.	Создайте файл конфигурации database.ini в корне проекта. 
Пример содержимого файла:
```ini
[postgresql]
host=localhost
user=your_user
password=your_password
port=5432
db_name=your_db_name
```
2.	Убедитесь, что у вас установлены все зависимости для работы с PostgreSQL (например, psycopg2).

## Запуск проекта
Для запуска проекта просто выполните команду:
```bash
python main.py
```

## Лицензия

Этот проект лицензируется @maxmaleev1
Этот файл README.md описывает основную структуру проекта, классы и их методы, настройку и запуск проекта.